{% extends "layout.html" %}

{% block nav %}
	{% include "nav_bar.html" with context %}
{% endblock nav %}

{% block tabs %}
                <ul>
                        <li><a href="#schedule">Schedule</a></li>
                        <li><a href="#standings">Standings</a></li>
                        {% if placings %}<li><a href="#places">Places</a></li>{% endif %}
                </ul>
{% endblock tabs %}
{% block games %}
<div id="schedule">
<h1>{{ titleText }} Schedule</h1>
<table>
	<tr class=header><td>Game</td><td>Start Time</td><td>Pool</td><td>Pod</td><td>Black</td><td></td><td>White</td><td></td></tr>
	{% set rank = 1 %}
	{% for game in games %}
		{% if rank % 2 == 0 %}
			{% set class="even" %}
		{% else %}
			{% set class="odd" %}
		{% endif %}
		<tr class={{ class }} >
			<td>{{ game.gid }}</td>
			<td>{{ game.day }} {{ game.start_time }}</td>
			<td>{{ game.pool }}</td>
			{% if game.pod_color %}
				<td style="background-color:{{ game.pod_color }}">{{ game.pod }}</td>
			{% else %}
				<td>--</td>
			{% endif %}
			<td class={{game.style_b}}>{{ game.black }}</td>
			<td>{{game.score_b}}</td>
			<td class={{game.style_w}}>{{ game.white }}</td>
			<td>{{game.score_w}}</td>
		</tr>
		{% set rank = rank + 1 %}
	{% endfor %}
</table>
<p class=note>{{ noteText }}</p>
</div>
{% endblock games %}

{% block standings %}
<div id="standings">
<h1>{{ titleText }} Standings</h1>
<table>
	<tr class=header><td>Rank</td><td>Team</td><td>Points</td><td>Record</td><td>GA</td><td>GP</td></tr>

	{% set rank = 1 %}
	{% for team in standings %}
		{% if lastPod != team.pod%}
			{% set rank = 1 %}
			<tr class=header><td colspan=6></td></tr>
		{% endif %}
		{% if rank % 2 == 0 %}
			{% set class="even" %}
		{% else %}
			{% set class="odd" %}
		{% endif %}
	
		<tr class={{ class }} >
			<td>{{ team.pod}}{{ rank }}</td>
			<td>{{ team.name }}</td>
			<td>{{ team.points }} </td>
			<td>{{ team.wins }}-{{ team.losses }}-{{ team.ties }}</td>
			<td>{{ team.goals_allowed }}</td>
			<td>{{ team.games_played }} </td>
		</tr>
		{% set rank = rank + 1 %}
		{% set lastPod = team.pod %}
	{% endfor %}
</table>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class=flashes>
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

</div>
{% endblock standings %}

{% block places %}
{% if placings %}
<div id="places">
<h1>{{ titleText }} Placings</h1>
<table>
	<tr class=header><td>Place</td><td>Team</td></tr>

	{% set row = 1 %}
	{% for team in placings %}
		{% if row % 2 == 0 %}
			{% set class="even" %}
		{% else %}
			{% set class="odd" %}
		{% endif %}
		<tr class={{ class }} >
			<td>{{ team.place }}</td><td class={{ team.style }}>{{ team.name }}</td>
		</tr>
		{% set row = row + 1 %}
	{% endfor %}
</table>
</div>
{% endif %}
{% endblock places %}
