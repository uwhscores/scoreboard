{% extends "/admin/admin_layout.html" %}

{% block nav %}
	{% include "admin/nav_admin.html" with context %}
{% endblock nav %}

{% block main %}

        <div id="page-wrapper">

            <div class="container-fluid">

                <!-- Page Heading -->
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">
                            Admin Panel <small>{{ tournament }}</small>
                        </h1>
                    </div>
                </div>
                <!-- /.row -->

                <div class="row">
                    <div class="col-lg-12">
					{% with messages = get_flashed_messages() -%}
						{% if messages %}
							{% set last="" -%}
							<div class="alert alert-danger" role="alert">
							{% for message in messages %}
								{% if message != last -%}
								{{ message }}</br>
								{%- endif %}
								{% set last=message %}
							{% endfor %}
							</div>
						{% endif %}
					{%- endwith %}
                    </div>
                </div>
                <!-- /.row -->

                <div class="row">
                    <div class="col-lg-8">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title"><i class="fa fa-bar-wrench fa-fw"></i> Configs</h3>
                            </div>
                            <div class="panel-body">
                            	<h4>Disable Webpage</h4>
																{% if disable_message -%}
																<div class="alert alert-danger" role="alert">
																	<p>Site is currently disabled!</p>
																</div>
																{%- endif %}
																<form name="site-active" action="/admin/update_config" method="POST">
																<div class="input-group">
																		<input type="hidden" name="config_id" value="site_active"/>
																			{% if disable_message -%}
																			<span class="input-group-addon">
																				<input type="checkbox" aria-label="enabled" checked=checked name="active_toggle">
																			</span>
																			<input type="text" class="form-control" aria-label="..." name="message" value="{{ disable_message }}">
																			{% else %}
																			<span class="input-group-addon">
																				<input type="checkbox" aria-label="disabled" name="active_toggle">
																			</span>
																			<input type="text" class="form-control" aria-label="..." name="message">
																			{%- endif %}
																		<span class="input-group-btn">
																			<button class="btn btn-default" type="submit">Update</button>
																		</span>
																</div><!-- /input-group -->
																</form>
                            	<div class="well well-sm">
                            		Use this to disable the page if there is an issue. Users will be presented with the
                            		above message until the issue can be resolved.
								</div>

                            </div>

                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title"><i class="fa fa-long-arrow-right fa-fw"></i> Tournament Stats</h3>
                            </div>
                            <div class="panel-body">
								<div class="list-group">
									{% if stats['total_games'] %}
									<a href="#" class="list-group-item">
										Total Games Played
										<span class="pull-right text-muted small"><em>{{ stats['total_games'][0]  }} of {{ stats['total_games'][1] }}</em>
										</span>
									</a>
									{%- endif %}

									{% if stats['round_robin'] %}
									<a href="#" class="list-group-item">
										Round-Robine games played
										<span class="pull-right text-muted small"><em>{{ stats['round_robin'][0]  }} of {{ stats['round_robin'][1] }}</em>
										</span>
									</a>
									{%- endif %}


								</div>
								<!-- /.list-group -->
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /.row -->
            </div>
            <!-- /.container-fluid -->
{% endblock main %}
